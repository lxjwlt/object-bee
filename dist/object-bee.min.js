/*!
 * object-bee v1.0.0
 * (c) 2017-present lxjwlt
 * Released under the MIT license
 * https://github.com/lxjwlt/object-bee.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bee=t():e.bee=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={copy:function(e){return n(3)(e,{includeNonEnumerable:!0})},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isSymbol:function(e){return"symbol"===(void 0===e?"undefined":r(e))},isPlainObject:n(4),isEqualObject:function(e,t){if(!o.isPlainObject(e)||!o.isPlainObject(t))return e===t;var n=Object.keys(e);if(n.length===Object.keys(t).length){for(var r=n,i=Array.isArray(r),c=0,r=i?r:r[Symbol.iterator]();;){var u;if(i){if(c>=r.length)break;u=r[c++]}else{if(c=r.next(),c.done)break;u=c.value}var a=u;if(e[a]!==t[a])return!1}return!0}},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isUndefined:function(e){return void 0===e},beeSymbol:function(e){return"[object-bee] "+e+" "+Date.now()+" "+Math.random()},nestLoop:function(e,t,n){var r=[e];if(arguments.length>3){var i=[].concat(Array.prototype.slice.call(arguments));t=i[i.length-2],n=i[i.length-1],r=i.slice(0,-2)}if(o.isPlainObject(t)&&r.every(function(e){return o.isPlainObject(e)})){var c=n&&n.apply(void 0,r.concat([t])),u=r.reduce(function(e,t){return e.concat(Object.getOwnPropertyNames(t))},[]).concat(Object.getOwnPropertyNames(t)),a=u.reduce(function(e,t){return e[t]=!0,e},{});Object.keys(a).forEach(function(e){var i=r.map(function(t){return t[e]});c&&c(i,t[e],e,r,t,"object"),o.nestLoop.apply(o,i.concat([t[e],n]))})}},loop:function(){var e=[].concat(Array.prototype.slice.call(arguments)),t=void 0;o.isFunction(e[e.length-1])&&(t=e[e.length-1],e=e.slice(0,-1).concat(function(){return t})),o.nestLoop.apply(null,e)},loopObject:function(e,t){o.loop(e,e,function(n,r,o,i){var c=n[0],u=i[0];t(c,o,u,e)})},path:function(e,t){if(!t||!(t=t.trim()))return e;var n="["===t[0]?"":".";return new Function("data","\n            try {\n                return data"+n+t+"\n            } catch (e) {}\n        ")(e)},makeArray:function(e){return o.isArray(e)?e:null===e||o.isUndefined(e)?[]:"object"===(void 0===e?"undefined":r(e))&&e.length?Array.prototype.slice.call(e):[e]},hasOwnProperty:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},getOwnPropertyDescriptors:function(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){var r=Object.getOwnPropertyDescriptor(e,n);return void 0!==r&&(t[n]=r),t},{})},assign:n(5)};e.exports=o},function(e,t,n){"use strict";var r=n(2);r.$install(n(8)),r.$install(n(9)),r.$install(n(10)),r.$install(n(11)),r.$install(n(12)),r.$install(n(15)),r.$install(n(16)),r.$install(n(17)),r.$install(n(18)),r.$install(n(19)),r.$install(n(20)),r.$install(n(21)),e.exports=r},function(e,t,n){"use strict";function r(e,t){return t=l.copy(t),r.$emit("before",e,t),a(e,t),r.$emit("after",e,t),v=0,e}function o(e){return l.isPlainObject(e)?Object.keys(e).filter(function(e){return i(e)}).map(function(t){var n=c(t),r=b.filter(function(e){return e.check&&e.check(n.info)});return{index:n.index,keyRegisters:r,bee:e[t],defaultAction:r.reduce(function(e,t){return l.assign(e,t.apply&&t.apply(n.info))},{}),info:n.info}}).sort(function(e,t){return e.index-t.index}):[]}function i(e){return 0===e.indexOf(d)}function c(e){if(0!==e.indexOf(d))throw new Error(e+" isn't a custom key of object-bee.");return JSON.parse(e.slice(d.length))}function u(e,t){if(r[e])throw new Error('"'+e+'" has been registered');r[e]=t}function a(e,t,n,c){var u=l.copy(e);return n=n||u,c=c||t,l.loop(e,u,function(e,t,n,r,o){Object.defineProperty(o,n,{configurable:!0,enumerable:!0,writable:!1,value:t})}),l.nestLoop(e,u,t,function(e,t,u){for(var s=o(u),p={},y=s,h=Array.isArray(y),b=0,y=h?y:y[Symbol.iterator]();;){var d;if(h){if(b>=y.length)break;d=y[b++]}else{if(b=y.next(),b.done)break;d=b.value}var v=d;if(l.hasOwnProperty(v.defaultAction,"key")){var m=v.defaultAction.key;l.hasOwnProperty(u,m)?p[m]=v.defaultAction:f(e,u,m,v.defaultAction)}}return function(e,t,o,u,y){var h=e[0],b=e[1],d=u[0],v=u[1],m=!1,O=!1,w=void 0,g=y[o];i(o)||Object.defineProperty(v,o,{enumerable:!0,get:function(){if(m)return w;if(O)return h;O=!0;var e=p[o]||{},i=void 0;do{var u=l.hasOwnProperty(e,"beeValue")?e.beeValue:t,j=s.filter(function(e){return e.keyRegisters.some(function(t){return t.match&&t.match(o,e.info)})}),x=j.reduce(function(e,t){return e.concat(t.bee)},[]);u&&x.push(u),e=r.$multiExecute(x,b,o,y,v,n,c,e),i=f(d,y,o,e)}while(!0===i);return w=b,(l.hasOwnProperty(e,"value")&&e.value!==b||l.hasOwnProperty(e,"beeValue")&&e.beeValue!==g)&&(w=a(l.hasOwnProperty(e,"value")?e.value:h,l.hasOwnProperty(e,"beeValue")?e.beeValue:t,n,c)),m=!0,O=!1,w}})}}),l.loop(u,u),u}function f(e,t,n,r){if(l.isPlainObject(r)){if(l.hasOwnProperty(r,"beeValue")&&!l.isEqualObject(r.beeValue,t[n]))return t[n]=s(t[n],r.beeValue),!0;if(r.create||e&&l.hasOwnProperty(e,n)){var o=n;if(l.hasOwnProperty(r,"key")){var i=Object.getOwnPropertyDescriptor(e,n)||{configurable:!0,enumerable:!0,writable:!0,value:e[n]};r.key!==n&&delete e[n],Object.defineProperty(e,r.key,i),o=r.key}else r.create&&(e[n]=e[n]);l.hasOwnProperty(r,"value")&&(e[o]=r.value),r.remove&&!r.create&&delete e[o]}}}function s(e,t){return l.isPlainObject(e)&&l.isPlainObject(t)?l.assign({},e,t):t}var l=n(0),p=n(6),y=new(n(7)),h=[],b=[],d="bee-"+String(Math.random()).replace(/\D/,""),v=0;r.$valueSceneRegisters=h,r.$execute=function(e,t,n,o,c,u,a){if(i(n))return{};if(!(e instanceof p)){var f=h.filter(function(n){return n.check&&n.check(e,t)})[0];return f?f.apply(e,t,n,o,c,u,a):{}}return r.$multiExecute(e.results,t,n,o,c,u,a)},r.$multiExecute=function(e,t,n,o,i,c,u,a){return e.reduce(function(e,a){n=l.hasOwnProperty(e,"key")?e.key:n,t=l.hasOwnProperty(e,"value")?e.value:t,o=l.hasOwnProperty(e,"beeValue")?e.beeValue:o;var f=r.$execute(a,t,n,o,i,c,u);return l.hasOwnProperty(f,"beeValue")&&(f.beeValue=s(e.beeValue,f.beeValue)),l.assign(e,f)},a||{})},r.$install=function(e){if("function"==typeof e&&(e=e(r)),e){if(!l.isPlainObject(e))throw new Error("Expect config of register to be Object");l.hasOwnProperty(e,"before")&&r.$on("before",e.before),l.hasOwnProperty(e,"after")&&r.$on("after",e.after),l.hasOwnProperty(e,"methods")&&r.$installMethods(e.methods),l.makeArray(e.valueScenes).forEach(function(e){return r.$installValueScene(e)}),l.makeArray(e.keyScenes).forEach(function(e){return r.$installKeyScene(e)})}},r.$on=function(){return y.on.apply(y,arguments)},r.$emit=function(){return y.emit.apply(y,arguments)},r.$off=function(){return y.off.apply(y,arguments)},r.$installMethods=function(e){if(!l.isPlainObject(e))throw new Error("Expect arguments to be Object");Object.keys(e).forEach(function(t){return u(t,e[t])})},r.$installValueScene=function(e){if(!l.isPlainObject(e))throw new Error('Expect config for "valueScene" to be Object');if(l.hasOwnProperty(e,"check")&&!l.isFunction(e.check))throw new Error("Expect config.check to be Function");if(l.hasOwnProperty(e,"apply")&&!l.isFunction(e.apply))throw new Error("Expect config.apply to be Function");if(l.hasOwnProperty(e,"method")&&!l.isPlainObject(e.method)&&!l.isFunction(e.method))throw new Error("Expect config.method to be Object or function");if(e.method){if(!e.name)throw new Error("Expect config.name to be defined when config.method is defined.");var t=e.method,n=!0;l.isPlainObject(t)&&(n=l.hasOwnProperty(t,"chain")?t.chain:n,t=t.handler),n?(u(e.name,function(){return new p(t.apply(null,arguments))}),p.setMethods(e.name,t)):u(e.name,t)}h.push(e)},r.$installKeyScene=function(e){if(!l.isPlainObject(e))throw new Error('Expect config for "keyScene" to be Object');if(l.hasOwnProperty(e,"check")&&!l.isFunction(e.check))throw new Error("Expect config.check to be Function");if(l.hasOwnProperty(e,"apply")&&!l.isFunction(e.apply))throw new Error("Expect config.apply to be Function");if(l.hasOwnProperty(e,"match")&&!l.isFunction(e.match))throw new Error("Expect config.match to be Function");if(l.hasOwnProperty(e,"method")&&!l.isPlainObject(e.method)&&!l.isFunction(e.method))throw new Error("Expect config.method to be Object or function");if(e.method){if(!e.name)throw new Error("Expect config.name to be defined when config.method is defined.");var t=e.method;l.isPlainObject(t)&&(t=t.handler),u(e.name,function(){return d+JSON.stringify({index:v++,info:t.apply(null,arguments)})})}b.push(e)},e.exports=r},function(e,t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}function t(n,r,o,i,s){function l(n,o){if(null===n)return null;if(0===o)return n;var b,d;if("object"!=typeof n)return n;if(e(n,u))b=new u;else if(e(n,a))b=new a;else if(e(n,f))b=new f(function(e,t){n.then(function(t){e(l(t,o-1))},function(e){t(l(e,o-1))})});else if(t.__isArray(n))b=[];else if(t.__isRegExp(n))b=new RegExp(n.source,c(n)),n.lastIndex&&(b.lastIndex=n.lastIndex);else if(t.__isDate(n))b=new Date(n.getTime());else{if(h&&Buffer.isBuffer(n))return b=new Buffer(n.length),n.copy(b),b;e(n,Error)?b=Object.create(n):void 0===i?(d=Object.getPrototypeOf(n),b=Object.create(d)):(b=Object.create(i),d=i)}if(r){var v=p.indexOf(n);if(-1!=v)return y[v];p.push(n),y.push(b)}e(n,u)&&n.forEach(function(e,t){var n=l(t,o-1),r=l(e,o-1);b.set(n,r)}),e(n,a)&&n.forEach(function(e){var t=l(e,o-1);b.add(t)});for(var m in n){var O;d&&(O=Object.getOwnPropertyDescriptor(d,m)),O&&null==O.set||(b[m]=l(n[m],o-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(n),m=0;m<w.length;m++){var g=w[m],j=Object.getOwnPropertyDescriptor(n,g);(!j||j.enumerable||s)&&(b[g]=l(n[g],o-1),j.enumerable||Object.defineProperty(b,g,{enumerable:!1}))}if(s)for(var x=Object.getOwnPropertyNames(n),m=0;m<x.length;m++){var P=x[m],j=Object.getOwnPropertyDescriptor(n,P);j&&j.enumerable||(b[P]=l(n[P],o-1),Object.defineProperty(b,P,{enumerable:!1}))}return b}"object"==typeof r&&(o=r.depth,i=r.prototype,s=r.includeNonEnumerable,r=r.circular);var p=[],y=[],h="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===o&&(o=1/0),l(n,o)}function n(e){return Object.prototype.toString.call(e)}function r(e){return"object"==typeof e&&"[object Date]"===n(e)}function o(e){return"object"==typeof e&&"[object Array]"===n(e)}function i(e){return"object"==typeof e&&"[object RegExp]"===n(e)}function c(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var u;try{u=Map}catch(e){u=function(){}}var a;try{a=Set}catch(e){a=function(){}}var f;try{f=Promise}catch(e){f=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=r,t.__isArray=o,t.__isRegExp=i,t.__getRegExpFlags=c,t}();"object"==typeof e&&e.exports&&(e.exports=n)},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,u,a=r(e),f=1;f<arguments.length;f++){n=Object(arguments[f]);for(var s in n)i.call(n,s)&&(a[s]=n[s]);if(o){u=o(n);for(var l=0;l<u.length;l++)c.call(n,u[l])&&(a[u[l]]=n[u[l]])}}return a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){r(this,e),this.results=[],t&&this.results.push(t)};o.setMethods=function(e,t){o.prototype[e]=function(){return this.results.push(t.apply(null,arguments)),this}},e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=function(){function e(){r(this,e),this.events={}}return e.prototype.on=function(e,t){if(!o.isFunction(t))throw new Error('Expect handler of "'+e+'" listener to be Function');this.events[e]=o.makeArray(this.events[e]),this.events[e].push(t)},e.prototype.off=function(e,t){var n=this.events[e];if(!n)return!1;if(!t)return delete this.events[e],!0;var r=n.indexOf(t);return r>=0&&(n.splice(r,1),!0)},e.prototype.emit=function(e){var t=[].concat(Array.prototype.slice.call(arguments)).slice(1);e=e.split(/\s+/g);for(var n=e,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var c;if(r){if(i>=n.length)break;c=n[i++]}else{if(i=n.next(),i.done)break;c=i.value}var u=c;o.makeArray(this.events[u]).forEach(function(e){return e.apply(null,t)})}},e}();e.exports=i},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){return{methods:{create:function(t,n){return e(r.copy(t),n)}}}}},function(e,t,n){"use strict";function r(){}var o=n(0);e.exports={valueScenes:{name:"ensure",check:function(e){return e instanceof r},apply:function(){return{create:!0}},method:function(){return new r}},keyScenes:{name:"keep",check:function(e){return o.isPlainObject(e)&&"_ensure_key_"===e.id},apply:function(e){return{create:!0,key:e.key}},match:function(e,t){return e===t.key},method:function(e){return{id:"_ensure_key_",key:e}}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=function e(t){r(this,e),this.value=t},c=function e(t){r(this,e),this.value=t};e.exports=function(e){return{methods:{entityAll:function(t,n){var r=o.copy(n);return o.loop(r,n,function(t,n,r,i){var u=(t[0],i[0]);o.isPlainObject(n)||(u[r]=n instanceof c?n.value:e.entity(n))}),e(t,r)}},valueScenes:[{name:"entity",check:function(e){return e instanceof i},apply:function(e){return{value:e.value}},method:function(e){return new i(e)}},{name:"escape",check:function(e){return e instanceof c},apply:function(e){return{beeValue:e.value}},method:{chain:!1,handler:function(e){return new c(e)}}}]}}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){e.$installValueScene({check:function(e){return"function"==typeof e},apply:function(t,n,o,i,c,u){var a=[],f={};e.$valueSceneRegisters.forEach(function(e){e.method&&e.apply&&(f["$"+e.name]=function(){var t=e.method,n=r.isFunction(t)?t.apply(null,arguments):t;a.push(n)})}),f.$root=u;var s=f.$UNDEFINED=r.beeSymbol("function return undefined"),l=Object.create(f,r.getOwnPropertyDescriptors(c)),p=t.call(l,n,o),y=e.$multiExecute.apply(e,[a].concat([].concat(Array.prototype.slice.call(arguments)).slice(1)));return r.isUndefined(p)||r.assign(y,{value:p===s?r.undefined:r.copy(p)}),y}}),e.$installMethods({root:function(e){return function(){var t=r.path(this.$root,e);return r.isUndefined(t)?this.$UNDEFINED:t}},data:function(e){return function(){var t=r.path(this,e);return r.isUndefined(t)?this.$UNDEFINED:t}}})}},function(e,t,n){"use strict";var r=n(13),o=n(0);e.exports={keyScenes:{name:"glob",check:function(e){return o.isPlainObject(e)&&"glob-match"===e.id},match:function(e,t){return t.data.some(function(t){return r(e,t)})},method:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{id:"glob-match",data:t}}}}},function(e,t,n){"use strict";function r(e){var t="!"===e[0];return t&&(e=e.slice(1)),e=o(e).replace(/\\\*/g,".*"),t&&(e="(?!"+e+")"),new RegExp("^"+e+"$")}var o=n(14);e.exports=function(e,t){return r(t).test(e)}},function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},function(e,t,n){"use strict";var r=n(0);e.exports={keyScenes:{name:"match",check:function(e){return r.isPlainObject(e)&&"key-match"===e.id},match:function(e,t){return t.data.some(function(t){var n=t.type,r=t.value;return"RegExp"===n?new RegExp(r.replace(/^\/|\/$/g,"")).test(e):e===r})},method:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{id:"key-match",data:t.map(function(e){return{type:e instanceof RegExp?"RegExp":"String",value:e.toString()}})}}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),i=function e(t){r(this,e),this.path=t,this.config=null};e.exports={valueScenes:{name:"mirror",check:function(e){return e instanceof i},apply:function(e,t,n,r,i,c,u){if(!e.config){var a=o.path(u,e.path);e.config=a}return{beeValue:o.copy(e.config)}},method:function(e){return new i(e)}}}},function(e,t,n){"use strict";var r=n(0),o=r.beeSymbol("noop symbol");e.exports={valueScenes:{name:"noop",check:function(e){return e===o},apply:function(){return{}},method:function(){return o}}}},function(e,t,n){"use strict";var r=n(0),o=r.beeSymbol("use of config");e.exports=function(e){return{methods:{CONFIG:o},valueScenes:{name:"config",check:function(e){return r.isPlainObject(e)},apply:function(t){var n=t[o];if(!n)return{beeValue:t};var r=[];return n&&(r.push(t[o]),delete t[o]),r.push(t),e.$multiExecute.apply(e,[r].concat([].concat(Array.prototype.slice.call(arguments)).slice(1)))},method:function(e){return e}}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){r(this,e),this.queue=t};e.exports=function(e){return{valueScenes:{name:"queue",method:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new o(t)},check:function(e){return e instanceof o},apply:function(t){return e.$multiExecute.apply(e,[t.queue].concat([].concat(Array.prototype.slice.call(arguments)).slice(1)))}}}}},function(e,t,n){"use strict";function r(){}e.exports={valueScenes:{name:"remove",check:function(e){return e instanceof r},apply:function(){return{remove:!0}},method:function(){return new r}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){r(this,e),this.name=t};e.exports={valueScenes:{name:"rename",check:function(e){return e instanceof o},apply:function(e){return{key:e.name}},method:function(e){return new o(e)}}}}])});